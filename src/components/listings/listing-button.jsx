"use client"
import { useState } from 'react';
import { useTranslations } from '@/i18n/client-i18n';
import Link from 'next/link'

export default function ListingButton({ entries }) {

  const t = useTranslations('Sidebar');

  const [menuOpen, setMenuOpen] = useState(false);

  return (
    <>
      <svg onClick={() => setMenuOpen(!menuOpen)} className="cursor-pointer" width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="0.5" y="0.5" width="47" height="47" rx="23.5" fill="#CCDFE3"/>
        <rect x="0.5" y="0.5" width="47" height="47" rx="23.5" stroke="#A0C6CD"/>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M30.7878 14.2727C31.3019 14.1445 31.8461 14.2258 32.3005 14.4983C32.6982 14.7369 32.9997 15.1047 33.155 15.5374L33.2117 15.7268L33.2126 15.7278L34.7273 21.7874L34.7654 21.9807C34.8326 22.4359 34.7412 22.9029 34.5027 23.301C34.23 23.7559 33.7876 24.0842 33.2732 24.2132L32.1824 24.4856C31.4106 24.6784 30.5939 24.556 29.9119 24.1467C29.7945 24.0763 29.6844 23.9961 29.5788 23.9114L26.9519 24.4719C26.9824 24.6435 26.9997 24.82 26.9997 25.0003C26.9997 25.8086 26.6778 26.5399 26.1579 27.0794L28.8943 32.553C29.141 33.0469 28.9408 33.6478 28.447 33.8948C27.984 34.126 27.4272 33.9644 27.156 33.5364L27.1062 33.4475L24.3699 27.9758C24.2486 27.9908 24.125 28.0003 23.9997 28.0003C23.874 28.0002 23.7503 27.9909 23.6286 27.9758L20.8943 33.4475C20.6472 33.9413 20.0464 34.1417 19.5525 33.8948C19.0586 33.6478 18.8585 33.0469 19.1052 32.553L21.8415 27.0803C21.4819 26.7073 21.2192 26.2422 21.0906 25.7229L16.0935 26.7893L16.0925 26.7883C15.5973 26.8946 15.0801 26.8035 14.6521 26.5325C14.2229 26.2605 13.9173 25.8302 13.8025 25.3352L13.8035 25.3342L13.2703 23.2014L13.2683 23.1956C13.1463 22.6946 13.2155 22.1657 13.4626 21.7132C13.7099 21.2605 14.1176 20.9163 14.6052 20.7483C14.6097 20.7468 14.6144 20.7459 14.6189 20.7444L27.5896 16.4788C27.6571 16.2825 27.7449 16.0921 27.8533 15.9114C28.2625 15.2296 28.9257 14.7383 29.697 14.5452L29.698 14.5442L30.7878 14.2727ZM23.9997 24.0003C23.4476 24.0004 22.9997 24.4481 22.9997 25.0003C22.9999 25.5523 23.4477 26.0001 23.9997 26.0003C24.5519 26.0003 24.9996 25.5524 24.9997 25.0003C24.9997 24.448 24.552 24.0003 23.9997 24.0003ZM15.2556 22.6389L15.2566 22.6399C15.2403 22.6456 15.2268 22.657 15.2185 22.6721C15.2106 22.6867 15.2074 22.7038 15.2107 22.72L15.7361 24.8196L18.0495 24.3255L17.448 21.9173L15.2556 22.6389ZM19.3523 21.2913L20.0066 23.9085L21.3347 23.6253C21.8334 22.6604 22.8388 22.0003 23.9997 22.0003C24.7079 22.0003 25.3577 22.2471 25.8708 22.6575L28.4929 22.0979L27.613 18.5764L19.3523 21.2913ZM30.1824 16.4856L30.1814 16.4846C29.9248 16.5492 29.7043 16.7138 29.5681 16.9407C29.4317 17.168 29.3916 17.4403 29.4558 17.6975L30.4851 21.8176C30.5495 22.0747 30.7139 22.2955 30.9411 22.4319C31.1685 22.5682 31.4408 22.6094 31.698 22.5452L32.7869 22.2727L31.2722 16.2132L30.1824 16.4856Z" fill="#29646F"/>
      </svg>
      <div className={`${menuOpen ? 'absolute' : 'hidden'} w-80 col-span-1 bg-white rounded-xl shadow-xl p-4 order-last lg:order-first`}>
        <div className="grid gap-4">
          {entries.map(entry => {
            return (
              <Link key={`entry-${entry.id}`} prefetch={false} href={`/listings/${entry.category}/${entry.slug}`}>
                <div className="flex items-center">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M17.25 7.5C17.25 12.75 12 15.75 12 15.75C12 15.75 6.75 12.75 6.75 7.5C6.75 6.10761 7.30312 4.77226 8.28769 3.78769C9.27226 2.80312 10.6076 2.25 12 2.25C13.3924 2.25 14.7277 2.80312 15.7123 3.78769C16.6969 4.77226 17.25 6.10761 17.25 7.5Z" fill="#DEC170"/>
                    <path d="M18.3408 13.6514C18.5741 13.5391 18.842 13.5214 19.0879 13.6025L19.0967 13.6055C21.3646 14.4424 22.75 15.7118 22.75 17.25C22.75 18.0662 22.3695 18.7743 21.7471 19.3672C21.1278 19.957 20.2599 20.4436 19.248 20.8301C17.2233 21.6034 14.5661 22 12 22C9.43391 22 6.77674 21.6034 4.75195 20.8301C3.74015 20.4436 2.87221 19.957 2.25293 19.3672C1.63053 18.7743 1.25 18.0662 1.25 17.25C1.25 15.7117 2.63613 14.4425 4.9043 13.6064L4.91211 13.6035C5.15801 13.5224 5.42585 13.5401 5.65918 13.6523C5.8927 13.7648 6.07426 13.9639 6.16406 14.207C6.25378 14.4501 6.24492 14.7188 6.14062 14.9561C6.0363 15.1931 5.84419 15.3803 5.60449 15.4785L5.59668 15.4824C4.83836 15.7626 4.23654 16.0859 3.83008 16.4102C3.41247 16.7434 3.25 17.0363 3.25 17.25C3.25 17.4507 3.39327 17.7306 3.78223 18.0547C4.16236 18.3714 4.73744 18.6957 5.49805 18.9863C7.01709 19.5668 9.23596 20 12 20C14.764 20 16.9829 19.5668 18.502 18.9863C19.2626 18.6957 19.8376 18.3714 20.2178 18.0547C20.6067 17.7306 20.75 17.4507 20.75 17.25C20.75 17.0363 20.5878 16.7427 20.1699 16.4092C19.7634 16.0848 19.1617 15.7621 18.4033 15.4814L18.3955 15.4785C18.1558 15.3803 17.9637 15.1922 17.8594 14.9551C17.7551 14.7179 17.7462 14.4492 17.8359 14.2061C17.9257 13.9629 18.1073 13.7639 18.3408 13.6514Z" fill="#29646F"/>
                    <path d="M11.4258 6.11426C11.6999 6.00073 12.002 5.97142 12.293 6.0293C12.5838 6.08723 12.8509 6.22977 13.0605 6.43945C13.2702 6.64913 13.4128 6.91622 13.4707 7.20703C13.5286 7.498 13.4993 7.80013 13.3857 8.07422C13.2722 8.34823 13.0796 8.58229 12.833 8.74707C12.5864 8.91182 12.2966 9 12 9C11.6022 9 11.2208 8.84185 10.9395 8.56055C10.6581 8.27924 10.5 7.89782 10.5 7.5C10.5 7.2034 10.5882 6.91363 10.7529 6.66699C10.9177 6.42038 11.1518 6.2278 11.4258 6.11426Z" fill="#29646F"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M12 1.25C13.6576 1.25 15.2468 1.90895 16.4189 3.08105C17.591 4.25316 18.25 5.8424 18.25 7.5C18.25 10.3947 16.8593 12.6447 15.457 14.1777C14.0556 15.7097 12.6257 16.5445 12.501 16.6172L12.499 16.6182C12.3479 16.7045 12.177 16.75 12.0029 16.75C11.8289 16.75 11.658 16.7045 11.5068 16.6182C11.3756 16.5435 9.94508 15.71 8.54395 14.1797C7.14085 12.6472 5.75 10.397 5.75 7.5C5.75 5.8424 6.40895 4.25316 7.58105 3.08105C8.75316 1.90895 10.3424 1.25 12 1.25ZM12 3.25C10.8728 3.25 9.79215 3.69809 8.99512 4.49512C8.19809 5.29215 7.75 6.37283 7.75 7.5C7.75 9.40413 8.5581 10.9965 9.51855 12.2168C10.4039 13.3416 11.4106 14.1377 12 14.5537C12.5889 14.1381 13.5951 13.3425 14.4805 12.2178C15.4412 10.9973 16.25 9.40435 16.25 7.5C16.25 6.37283 15.8019 5.29215 15.0049 4.49512C14.2079 3.69809 13.1272 3.25 12 3.25Z" fill="#29646F"/>
                  </svg>
                  <div className="ml-4">
                    <h5 className="nld-font-jost nld-text-teal-500 nld-font-h6 uppercase">{entry.category}</h5>
                    <h5 className="nld-text-grey-500 nld-font-h5">{entry.name}</h5>
                    <h5 className="nld-text-grey-300 nld-font-h6">{new Date(entry.updatedAt).toLocaleDateString()}</h5>
                  </div>
                </div>
              </Link>
            )
          })}
        </div>
        <Link prefetch={false} href="/listings" className="mt-4 block rounded-full nld-bg-green-500 nld-text-grey-500 font-semibold px-4 py-2.5 text-left flex items-center">
          {t('visit-listings')}
          <svg className="ml-2" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9.41097 3.57754C9.73641 3.25211 10.2639 3.25211 10.5894 3.57754L16.4227 9.41088C16.4625 9.45072 16.4981 9.49468 16.5293 9.5419C16.5499 9.57314 16.5679 9.60558 16.5838 9.63874C16.602 9.6764 16.6178 9.71538 16.6302 9.75593C16.6354 9.77284 16.6392 9.79006 16.6432 9.8072C16.6579 9.86916 16.6668 9.93361 16.6668 10.0001C16.6668 10.0692 16.6567 10.136 16.6408 10.2003C16.6373 10.2144 16.6344 10.2286 16.6302 10.2426C16.6178 10.2834 16.6021 10.3227 16.5838 10.3606C16.5671 10.3953 16.5478 10.4289 16.526 10.4615C16.5156 10.4772 16.5042 10.4921 16.4927 10.5071C16.471 10.5352 16.4485 10.5634 16.4227 10.5893L10.5894 16.4226C10.2639 16.748 9.73639 16.748 9.41097 16.4226C9.08555 16.0972 9.08559 15.5697 9.41097 15.2442L13.8218 10.8334H4.16683C3.70662 10.8334 3.33353 10.4603 3.3335 10.0001C3.3335 9.53983 3.70659 9.16674 4.16683 9.16674H13.8218L9.41097 4.75593C9.08555 4.43051 9.08559 3.90299 9.41097 3.57754Z" fill="#23282B"/>
          </svg>
        </Link>
      </div>
    </>
  )
}
